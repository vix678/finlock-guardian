// Improve contract state management
// Fix overflow bug in token calculation
