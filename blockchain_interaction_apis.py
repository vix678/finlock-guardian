// Refactor contract state machine design
// Fix errors in contract interaction with wallets
